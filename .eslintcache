[{"C:\\VCProjects\\currency-frontend\\currency-app\\src\\index.js":"1","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Header.jsx":"2","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\App.jsx":"3","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Block.jsx":"4","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Table.jsx":"5","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Footer.jsx":"6"},{"size":187,"mtime":1611887252546,"results":"7","hashOfConfig":"8"},{"size":180,"mtime":1611886104706,"results":"9","hashOfConfig":"8"},{"size":5908,"mtime":1612386104920,"results":"10","hashOfConfig":"8"},{"size":3429,"mtime":1612384191081,"results":"11","hashOfConfig":"8"},{"size":1874,"mtime":1612356295095,"results":"12","hashOfConfig":"8"},{"size":232,"mtime":1611886205762,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1ommfgr",{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"18","messages":"19","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"20"},{"filePath":"21","messages":"22","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\VCProjects\\currency-frontend\\currency-app\\src\\index.js",[],"C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Header.jsx",[],"C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\App.jsx",["29","30"],"import React, { Component } from \"react\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport Block from \"./Block\";\r\n\r\nimport CurrencyLayerClient from '../../node_modules/currencylayer-client';\r\n\r\n\r\nclass App extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.apiConf = { apiKey: 'f97a26d510e99f6b4bde901830c7fc8a', free: false };\r\n    this.client = new CurrencyLayerClient(this.apiConf);\r\n    this.state = {\r\n      source: '',\r\n      currencies: {\r\n        \"EUR\": \"Euro\",\r\n        \"CHF\": \"Swiss Franc\",\r\n        \"USD\": \"United States Dollar\"\r\n      },\r\n      quotes: {},\r\n      from: 'EUR',\r\n      to: '',\r\n      format: 1,\r\n      amount: 1,\r\n      isCollapsed: false,\r\n      history: {}\r\n    };\r\n    \r\n    this.state.history.dates = this.getLastMonth();\r\n    this.state.history.values = {};\r\n\r\n    this.onInputValueChanged = this.onInputValueChanged.bind(this);\r\n    this.onRadioInputChange = this.onRadioInputChange.bind(this);\r\n    this.onCheckedChange = this.onCheckedChange.bind(this);\r\n\r\n    this.fetchLiveRates(this.state.currencies);\r\n    this.fetchHistoryRates(this.state.currencies);\r\n  }\r\n\r\n  /**\r\n  * Fetches real time rates\r\n  */\r\n  fetchLiveRates(newCurrencies) {\r\n\r\n    if (newCurrencies === undefined) {\r\n      newCurrencies = this.state.currencies;\r\n    }\r\n\r\n    let currencies = Object.keys(newCurrencies).join(',');\r\n    this.client.live({ currencies: currencies, source: this.state.from }).then((response) => {\r\n\r\n      this.setState({\r\n        quotes: response.quotes,\r\n        currencies: newCurrencies\r\n      });\r\n\r\n    }).catch(err => {\r\n      console.log(err.code)\r\n      console.log(err.message)\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * fetches rates from predefined past dates\r\n   * @param {Object} newCurrencies \r\n   */\r\n  fetchHistoryRates(newCurrencies) {\r\n\r\n    let currencies = Object.keys(newCurrencies).join(',');\r\n    let month = this.state.history.dates;\r\n    let values = this.state.history.values;\r\n\r\n    month.map((date) => {\r\n      this.client.historical({ date: date, currencies: currencies, source: this.state.from }).then((response) => {\r\n        values[response.date] = response.quotes;\r\n\r\n        if(Object.keys(values).length === 6) {\r\n          this.setState({\r\n            history:{\r\n              dates: month,\r\n              values: values\r\n            }\r\n          });\r\n          console.log(values)\r\n        }\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * onReady\r\n   */\r\n  componentDidMount() {\r\n    this.fetchLiveRates(this.state.currencies);\r\n  }\r\n\r\n  /**\r\n   * onUpdate\r\n   */\r\n  componentDidUpdate(prevProps, prevState) {\r\n\r\n    var shouldFetchRates = false;\r\n\r\n    Object.keys(prevState).map((key) => {\r\n\r\n      if (key === 'from') {\r\n        let prevField = JSON.stringify(prevState[key]);\r\n        let currentStateField = JSON.stringify(this.state[key]);\r\n        if (prevField !== currentStateField) {\r\n          shouldFetchRates = true;\r\n          return false;\r\n        }\r\n      }\r\n      return;\r\n    });\r\n\r\n    if (shouldFetchRates === true) {\r\n      this.fetchLiveRates(this.state.currencies);\r\n      this.fetchHistoryRates(this.state.currencies);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * [OBSOLETE] There was no need for such functionality. \r\n   * I was over the limit of free requests with currency-layer by the first evening.\r\n   * Ended up using the paid version which includes this feature.\r\n   * @param {*} currencyRates \r\n   * @param {*} desiredCurrency \r\n   * @param {*} amount \r\n   */\r\n  convertCurrency(currencyRates, desiredCurrency, amount) {\r\n    let currentCurrency = \"USD\";\r\n    let currentRate = currencyRates[currentCurrency];\r\n    let desiredRate = currencyRates[desiredCurrency];\r\n\r\n    let USDAmount = amount * currentRate;\r\n    let convertedAmount = USDAmount / desiredRate;\r\n\r\n    return convertedAmount;\r\n  }\r\n\r\n  /**\r\n   * event handler for input\r\n   * @param {*} event \r\n   */\r\n  onInputValueChanged(event) {\r\n    this.setState({\r\n      amount: event.currentTarget.value\r\n    });\r\n  }\r\n\r\n  /**\r\n   * event handler for radio buttons\r\n   * @param {*} event \r\n   */\r\n  onRadioInputChange(event) {\r\n    this.setState({\r\n      from: event.currentTarget.value\r\n    });\r\n  }\r\n\r\n  /**\r\n   * event handler for show/hide switch\r\n   * @param {*} event \r\n   */\r\n  onCheckedChange(event) {\r\n    this.setState({\r\n      isCollapsed: event.currentTarget.checked\r\n    });\r\n  }\r\n\r\n  /**\r\n   * formats the date \r\n   * @param {*} date \r\n   */\r\n  formatDate(date){\r\n    var dd = date.getDate();\r\n    var mm = date.getMonth()+1;\r\n    var yyyy = date.getFullYear();\r\n    if(dd<10) {dd='0'+dd}\r\n    if(mm<10) {mm='0'+mm}\r\n    date = yyyy + '-' + mm + '-' + dd;\r\n    return date\r\n }\r\n\r\n /**\r\n  * returns the last 30 days in an array of strings\r\n  */\r\n  getLastMonth() {\r\n    var result = [];\r\n    for (var i=0; i<30; i = i+5) {\r\n        var d = new Date();\r\n        d.setDate(d.getDate() - i);\r\n        result.push(this.formatDate(d));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n\r\n    const quotes = this.state.quotes;\r\n    const currencies = this.state.currencies;\r\n    const amount = this.state.amount;\r\n    const from = this.state.from;\r\n    const isCollapsed = this.state.isCollapsed;\r\n    const onInputValueChanged = this.onInputValueChanged;\r\n    const onRadioInputChange = this.onRadioInputChange;\r\n    const onCheckedChange = this.onCheckedChange;\r\n\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <div className=\"main-content-wrapper\">\r\n        <Block quotes={quotes} currencies={currencies} amount={amount} from={from} onRadioInputChange={onRadioInputChange} onInputValueChanged={onInputValueChanged} />\r\n        <Block values={this.state.history.values} dates={this.state.history.dates} from={from} onInputValueChanged={onInputValueChanged} onCheckedChange={onCheckedChange} isCollapsed={isCollapsed} isHistory={true} />\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default App;","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Block.jsx",["31","32"],"import React, { Component } from \"react\";\r\nimport { LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip } from 'recharts';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Table from \"./Table\";\r\n\r\nclass Block extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    generateRadioButtons() {\r\n\r\n        return !this.props.currencies ? null : Object.keys(this.props.currencies).map((key) => {\r\n            return (\r\n                <div className=\"divButtonWrapper\">\r\n                    <input type=\"radio\" name={key} value={key} checked={this.props.from === key} onChange={this.props.onRadioInputChange} />\r\n                    <label htmlFor={key}>&nbsp;{key}&nbsp;</label>\r\n                </div>\r\n            )\r\n        });\r\n\r\n    }\r\n\r\n    fixData(values) {\r\n        var data = [];\r\n\r\n        Object.keys(values).map((key) => {\r\n            let obj = {};\r\n            obj['name'] = key;\r\n            obj[this.props.from + \"USD\"] = values[key][this.props.from + \"USD\"];\r\n            obj[this.props.from + \"EUR\"] = values[key][this.props.from + \"EUR\"];\r\n            obj[this.props.from + \"CHF\"] = values[key][this.props.from + \"CHF\"];\r\n\r\n            data.push(obj);\r\n        });\r\n\r\n        return data;\r\n    }\r\n\r\n    getChart() {\r\n        const data = this.fixData(this.props.values);\r\n        return (\r\n            <LineChart width={500} height={300} data={data} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\r\n                <Line type=\"monotone\" dataKey={this.props.from + \"EUR\"} stroke=\"#8884d8\" />\r\n                <Line type=\"monotone\" dataKey={this.props.from + \"USD\"} stroke=\"#82ca9d\" />\r\n                <Line type=\"monotone\" dataKey={this.props.from + \"CHF\"} stroke=\"#f00e0e\" />\r\n                <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"3 3\"/>\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n            </LineChart>\r\n        );\r\n    }\r\n\r\n    renderHistoryBlock() {\r\n\r\n        return (\r\n\r\n            <div className=\"block historyBlock\">\r\n                <h1>History</h1>\r\n                <FormControlLabel\r\n                    control={<Switch checked={this.props.isCollapsed} onChange={this.props.onCheckedChange} />}\r\n                    label=\"Show\"\r\n                />\r\n                <Collapse in={this.props.isCollapsed}>\r\n\r\n                {this.getChart()}\r\n\r\n                </Collapse>\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n    renderCurrencyTableBlock() {\r\n\r\n        return (\r\n            <div className=\"block currency-table-block\">\r\n                <h1>Currency</h1>\r\n                {this.generateRadioButtons()}\r\n                <input value={this.props.amount} onChange={this.props.onInputValueChanged} className=\"amount\" placeholder=\"Enter an amount.\"></input>\r\n                <Table\r\n                    quotes={this.props.quotes}\r\n                    amount={this.props.amount}\r\n                    from={this.props.from}\r\n                    currencies={this.props.currencies}\r\n                />\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.isHistory) {\r\n            return this.renderHistoryBlock();\r\n        }\r\n        else {\r\n            return this.renderCurrencyTableBlock();\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default Block;","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Table.jsx",["33","34"],"import React, { Component } from 'react';\r\n\r\nclass Table extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    isNumber(n) {\r\n        return !isNaN(parseFloat(n)) && !isNaN(n - 0)\r\n    }\r\n\r\n    roundNumber(num, scale) {\r\n        if (!(\"\" + num).includes(\"e\")) {\r\n            return +(Math.round(num + \"e+\" + scale) + \"e-\" + scale);\r\n        } else {\r\n            var arr = (\"\" + num).split(\"e\");\r\n            var sig = \"\"\r\n            if (+arr[1] + scale > 0) {\r\n                sig = \"+\";\r\n            }\r\n            return +(Math.round(+arr[0] + \"e\" + sig + (+arr[1] + scale)) + \"e-\" + scale);\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        var quotes = this.props.quotes;\r\n        var amount = this.props.amount;\r\n        if (!this.isNumber(amount)) {\r\n            amount = 1;\r\n        }\r\n        var from = this.props.from;\r\n        var currencies = this.props.currencies;\r\n        var tableItems = !currencies ? null : Object.keys(currencies).map((key) => {\r\n            let tmp = from + key;\r\n            if (!this.isNumber(quotes[tmp])) {\r\n                return;\r\n            }\r\n            return (\r\n                <tr key={key}>\r\n                    <td>{key + ' - ' + currencies[key]}</td>\r\n                    <td>{this.roundNumber(amount * quotes[tmp], 3)}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"divTableWrapper\">\r\n                    <table>\r\n                        <tbody>\r\n                            <tr>\r\n                                <th>Currency</th>\r\n                                <th>Value</th>\r\n                            </tr>\r\n                            {tableItems}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Table;","C:\\VCProjects\\currency-frontend\\currency-app\\src\\components\\Footer.jsx",[],{"ruleId":"35","severity":1,"message":"36","line":76,"column":22,"nodeType":"37","messageId":"38","endLine":76,"endColumn":24},{"ruleId":"35","severity":1,"message":"36","line":118,"column":7,"nodeType":"39","messageId":"40","endLine":118,"endColumn":14},{"ruleId":"41","severity":1,"message":"42","line":10,"column":5,"nodeType":"43","messageId":"44","endLine":12,"endColumn":6},{"ruleId":"35","severity":1,"message":"36","line":30,"column":39,"nodeType":"37","messageId":"38","endLine":30,"endColumn":41},{"ruleId":"41","severity":1,"message":"42","line":5,"column":5,"nodeType":"43","messageId":"44","endLine":7,"endColumn":6},{"ruleId":"35","severity":1,"message":"36","line":38,"column":17,"nodeType":"39","messageId":"40","endLine":38,"endColumn":24},"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","ReturnStatement","expectedReturnValue","no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor"]